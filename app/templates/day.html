{% extends "base.html" %}

{% block content %}
<section class="card">
  <h2>æ—¥æœŸï¼š{{ "%04d-%02d-%02d"|format(year, month, day) }}</h2>
  <p>
    <a href="/" class="btn btn-outline"><span class="icon-dot">â†©</span>è¿”å›é¦–é¡µ</a>
    <span> | </span>
    <a href="/download/day/{{ year }}/{{ month }}/{{ day }}" class="btn"><span class="icon-dot">â¬‡</span>ä¸‹è½½å½“æ—¥ZIP</a>
  </p>
  <form action="/day/{{ year }}/{{ month }}/{{ day }}/clear" method="post" onsubmit="return confirm('ç¡®å®šæ¸…ç©ºè¯¥æ—¥æœŸä¸‹å…¨éƒ¨è¡Œç¨‹æ•°æ®å—ï¼Ÿ');">
    <button type="submit" class="danger"><span class="icon-dot">ğŸ—‘</span>æ¸…ç©ºå½“å¤©æ•°æ®</button>
  </form>
</section>

{% for trip in trips %}
<section class="card">
  <h3>{{ trip.name }}</h3>
  <p>
    é‡‘é¢ï¼š{{ "%.2f"|format(trip.metadata.get('total_amount', 0)) }} å…ƒï¼Œ
    å‘ç¥¨ï¼š{{ trip.metadata.get('invoice_count', 0) }} å¼ 
  </p>

  {% if trip.itinerary %}
    <p>
      è¡Œç¨‹å•ï¼š
      <a href="/file/{{ year }}/{{ month }}/{{ day }}/{{ trip.name }}/itinerary.pdf">itinerary.pdf</a>
    </p>
  {% else %}
    <p>è¡Œç¨‹å•ï¼šæ— </p>
  {% endif %}

  <p>å‘ç¥¨ï¼š</p>
  <ul>
    {% for invoice in trip.invoices %}
      <li>
        <a href="/file/{{ year }}/{{ month }}/{{ day }}/{{ trip.name }}/{{ invoice.name }}">{{ invoice.name }}</a>
      </li>
    {% endfor %}
  </ul>
</section>
{% endfor %}

{% if not trips %}
<section class="card"><p>è¯¥æ—¥æœŸæš‚æ— è¡Œç¨‹æ•°æ®ã€‚</p></section>
{% endif %}
{% endblock %}
